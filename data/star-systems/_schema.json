{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "star-system.schema.json",
  "title": "Traveller Star System",
  "description": "Standard format for star system data in Operations VTT",
  "type": "object",
  "required": ["id", "name", "sector", "subsector", "hex", "uwp", "stellar", "celestialObjects", "locations"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique system identifier (lowercase, no spaces)",
      "pattern": "^[a-z0-9-]+$"
    },
    "name": {
      "type": "string",
      "description": "Display name of the system"
    },
    "sector": {
      "type": "string",
      "description": "Sector name (e.g., 'Spinward Marches')"
    },
    "subsector": {
      "type": "string",
      "description": "Subsector name (e.g., 'District 268')"
    },
    "hex": {
      "type": "string",
      "description": "Hex location in sector (e.g., '1525')",
      "pattern": "^[0-9]{4}$"
    },
    "uwp": {
      "type": "string",
      "description": "Universal World Profile (e.g., 'B8B4643-9')",
      "pattern": "^[A-EX][0-9A-F]{6}-[0-9A-F]$"
    },
    "tradeCodes": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Trade classification codes"
    },
    "allegiance": {
      "type": "string",
      "description": "Political allegiance (Im=Imperium, Na=Non-aligned, etc.)"
    },
    "bases": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Base codes (N=Naval, S=Scout, etc.)"
    },
    "stellar": {
      "type": "object",
      "required": ["primary"],
      "properties": {
        "primary": { "type": "string", "description": "Primary star spectral class" },
        "secondary": { "type": "string", "description": "Secondary star if binary/trinary" },
        "tertiary": { "type": "string" },
        "type": { "type": "string", "enum": ["Single", "Binary", "Trinary"] }
      }
    },
    "worlds": { "type": "integer", "description": "Number of significant worlds" },
    "gasGiants": { "type": "integer", "description": "Number of gas giants" },
    "planetoidBelts": { "type": "integer", "description": "Number of planetoid belts" },
    "notes": { "type": "string", "description": "General system notes" },
    "wikiUrl": { "type": "string", "format": "uri" },
    "celestialObjects": {
      "type": "array",
      "description": "Stars, planets, moons, stations, etc.",
      "items": {
        "type": "object",
        "required": ["id", "name", "type"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["Star", "Planet", "Moon", "Gas Giant", "Planetoid Belt", "Station", "Naval Base", "Scout Base"]
          },
          "parent": { "type": "string", "description": "ID of parent object (for moons, stations)" },
          "orbitAU": { "type": "number", "description": "Orbital distance in AU" },
          "orbitKm": { "type": "integer", "description": "Orbital distance in km (for close objects)" },
          "bearing": { "type": "integer", "minimum": 0, "maximum": 359 },
          "stellarClass": { "type": "string" },
          "stellarInfo": { "type": "object" },
          "uwp": { "type": "string" },
          "tradeCodes": { "type": "array", "items": { "type": "string" } },
          "atmosphere": { "type": "string" },
          "breathable": { "type": "boolean" },
          "inGoldilocks": { "type": "boolean", "description": "Within habitable zone" },
          "transponder": { "type": "string" },
          "gmNotes": { "type": "string" },
          "celestial": { "type": "boolean", "default": true }
        }
      }
    },
    "locations": {
      "type": "array",
      "description": "Navigable locations for ship movement",
      "items": {
        "type": "object",
        "required": ["id", "name", "type"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["jump_point", "orbit", "dock", "land", "space", "fuel_skim", "hide"]
          },
          "linkedTo": { "type": "string", "description": "Celestial object ID this location relates to" },
          "x": { "type": "integer", "description": "Map X coordinate" },
          "y": { "type": "integer", "description": "Map Y coordinate" },
          "actions": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Available actions at location"
          },
          "travelTimeHours": { "type": "object", "description": "Hours to reach from other locations" }
        }
      }
    },
    "roleContent": {
      "type": "object",
      "description": "Role-specific briefing text",
      "additionalProperties": { "type": "string" }
    },
    "news": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "headline": { "type": "string" },
          "source": { "type": "string" },
          "content": { "type": "string" }
        }
      }
    },
    "mail": {
      "type": "object",
      "description": "Role-specific mail messages",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "from": { "type": "string" },
          "subject": { "type": "string" },
          "content": { "type": "string" }
        }
      }
    }
  }
}
